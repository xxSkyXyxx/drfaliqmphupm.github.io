<!DOCTYPE html>
<html lang="en">
<!-- Chosen Palette: Warm Neutral & Muted Blue (Tailwind stone-50, gray-800, white, blue-600) -->
<!-- Application Structure Plan: A single-page application (SPA) with a sticky top navigation. Now includes a HISTORY section with a vertical timeline. Interactions include tabbed navigation, accordion for challenges, and modal for QR code. -->
<!-- Visualization & Content Choices: 1. Timeline: Vertical Tailwind border with dots (Goal: Change/History). 2. Charts: Chart.js (Goal: Compare). 3. Accordion: Challenges (Goal: Organize). -->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canada Health System Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Add QRCode.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .active-nav-link {
            color: #2563eb; /* text-blue-600 */
            border-bottom: 2px solid #2563eb;
            font-weight: 600;
        }
        .nav-link {
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }
        .chart-container {
            position: relative;
            margin-left: auto;
            margin-right: auto;
        }
        .challenge-icon {
            transition: transform 0.3s ease;
        }
        .challenge-toggle[aria-expanded="true"] .challenge-icon {
            transform: rotate(45deg);
        }
        /* Timeline specific styles */
        .timeline-point {
            position: absolute;
            left: -9px;
            background-color: white;
            border: 4px solid #2563eb;
            border-radius: 50%;
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body class="bg-stone-50 text-gray-800 antialiased">

    <!-- Header & Navigation -->
    <header class="sticky top-0 bg-white shadow-md z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <nav class="flex flex-col sm:flex-row justify-between items-center py-3">
                <h1 class="text-xl md:text-2xl font-bold text-blue-700 mb-2 sm:mb-0">
                    Health System Analysis: Canada
                </h1>
                <div class="flex flex-wrap justify-center sm:justify-end space-x-3 sm:space-x-4">
                    <a href="#overview" class="nav-link text-sm md:text-base px-2 py-2 active-nav-link" data-target="#overview">Overview</a>
                    <a href="#history" class="nav-link text-sm md:text-base px-2 py-2" data-target="#history">History</a>
                    <a href="#how-it-works" class="nav-link text-sm md:text-base px-2 py-2" data-target="#how-it-works">Mechanics</a>
                    <a href="#comparison" class="nav-link text-sm md:text-base px-2 py-2" data-target="#comparison">vs. Malaysia</a>
                    <a href="#challenges" class="nav-link text-sm md:text-base px-2 py-2" data-target="#challenges">Challenges</a>
                    <a href="#lessons" class="nav-link text-sm md:text-base px-2 py-2" data-target="#lessons">Lessons</a>
                    
                    <!-- Share Button -->
                    <button id="shareBtn" class="bg-blue-600 text-white text-sm md:text-base px-3 py-2 rounded hover:bg-blue-700 transition-colors shadow-sm font-semibold flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4h-4v-4H8m13-9a2 2 0 01-2.003-2M6 10h2a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2zm10 0h2a2 2 0 002-2V6a2 2 0 00-2-2h-2a2 2 0 00-2 2v2a2 2 0 002 2zM6 20h2a2 2 0 002-2v-2a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2z" />
                        </svg>
                        Share
                    </button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <!-- Overview Section -->
        <section id="overview" class="content-section">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Canada's "Medicare" System</h2>
            <p class="text-lg text-gray-700 mb-8 max-w-3xl">
                Canada's national health insurance system, known as Medicare, is not a single national plan but rather 13 interlocking provincial and territorial plans. It's built on the core principle of providing universal coverage for "medically necessary" hospital and physician services, funded by general taxation.
            </p>
            
            <h3 class="text-2xl font-semibold text-gray-900 mb-6">The 5 Principles of the Canada Health Act (1984)</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4">
                <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-200">
                    <h4 class="font-bold text-lg text-blue-700 mb-2">Public Administration</h4>
                    <p class="text-sm text-gray-600">Must be operated on a non-profit basis by a public authority.</p>
                </div>
                <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-200">
                    <h4 class="font-bold text-lg text-blue-700 mb-2">Comprehensiveness</h4>
                    <p class="text-sm text-gray-600">Must insure all "medically necessary" services provided by hospitals and doctors.</p>
                </div>
                <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-200">
                    <h4 class="font-bold text-lg text-blue-700 mb-2">Universality</h4>
                    <p class="text-sm text-gray-600">All eligible residents must be entitled to the same level of care.</p>
                </div>
                <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-200">
                    <h4 class="font-bold text-lg text-blue-700 mb-2">Portability</h4>
                    <p class="text-sm text-gray-600">Residents are covered when they move to another province or travel within Canada.</p>
                </div>
                <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-200">
                    <h4 class="font-bold text-lg text-blue-700 mb-2">Accessibility</h4>
                    <p class="text-sm text-gray-600">Must provide reasonable access to services without financial or other barriers.</p>
                </div>
            </div>
        </section>

        <!-- History Storyline Section (NEW) -->
        <section id="history" class="content-section hidden">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">The Birth of Medicare: A Timeline</h2>
            <p class="text-lg text-gray-700 mb-10 max-w-3xl">
                The Canadian system didn't happen overnight. It began as a bold experiment in the prairies and fought its way to becoming a national identity.
            </p>
            
            <div class="relative border-l-4 border-blue-200 ml-3 md:ml-6 space-y-10">
                
                <!-- 1947 -->
                <div class="ml-8 relative">
                    <div class="timeline-point"></div>
                    <span class="text-sm font-bold text-blue-600 uppercase tracking-wider">1947</span>
                    <h3 class="text-xl font-bold text-gray-900">The Saskatchewan Experiment</h3>
                    <p class="mt-2 text-gray-700 max-w-2xl">
                        Under Premier <strong>Tommy Douglas</strong> (often voted the "Greatest Canadian"), the province of Saskatchewan introduces the first public hospital insurance plan. It was the spark that lit the fire.
                    </p>
                </div>

                <!-- 1957 -->
                <div class="ml-8 relative">
                    <div class="timeline-point"></div>
                    <span class="text-sm font-bold text-blue-600 uppercase tracking-wider">1957</span>
                    <h3 class="text-xl font-bold text-gray-900">Federal Support Begins</h3>
                    <p class="mt-2 text-gray-700 max-w-2xl">
                        Seeing Saskatchewan's success, the Federal government passes the <em>Hospital Insurance and Diagnostic Services Act</em>. They offer to pay 50% of the costs for any province that sets up a similar plan.
                    </p>
                </div>

                <!-- 1966 -->
                <div class="ml-8 relative">
                    <div class="timeline-point"></div>
                    <span class="text-sm font-bold text-blue-600 uppercase tracking-wider">1966</span>
                    <h3 class="text-xl font-bold text-gray-900">Going National: The Medical Care Act</h3>
                    <p class="mt-2 text-gray-700 max-w-2xl">
                        Parliament passes the <em>Medical Care Act</em>. This extended coverage beyond just hospitals to include <strong>doctors' services</strong>. By 1972, all provinces and territories had joined.
                    </p>
                </div>

                <!-- 1984 -->
                <div class="ml-8 relative">
                    <div class="timeline-point"></div>
                    <span class="text-sm font-bold text-blue-600 uppercase tracking-wider">1984</span>
                    <h3 class="text-xl font-bold text-gray-900">The Canada Health Act</h3>
                    <p class="mt-2 text-gray-700 max-w-2xl">
                        To stop the rise of "extra-billing" (doctors charging patients extra fees), the Federal government passes the <em>Canada Health Act</em>. This consolidated previous acts and established the <strong>5 Principles</strong> (Public Admin, Comprehensiveness, Universality, Portability, Accessibility) as conditions for federal funding.
                    </p>
                </div>

            </div>
        </section>

        <!-- How it Works Section -->
        <section id="how-it-works" class="content-section hidden">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">How It Works: Funding & Delivery</h2>
            <p class="text-lg text-gray-700 mb-8 max-w-3xl">
                The Canadian system is a "single-payer" model. This means the government (specifically, the province) pays for insured health services. Doctors are typically not government employees but private practitioners who are paid on a fee-for-service basis.
            </p>

            <h3 class="text-2xl font-semibold text-gray-900 mb-6">A Resident's Funding Journey (The "Ali in Toronto" Example)</h3>
            <div class="bg-white p-6 rounded-lg shadow-md border border-gray-200">
                <div class="flex flex-col md:flex-row md:items-center justify-between space-y-4 md:space-y-0 md:space-x-2">
                    
                    <div class="flex items-center space-x-3">
                        <div class="flex-shrink-0 w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-lg">1</div>
                        <p class="font-semibold">Resident pays income tax</p>
                    </div>
                    <span class="text-3xl text-blue-500 hidden md:block transform rotate-90 md:rotate-0">→</span>
                    <div class="flex items-center space-x-3">
                        <div class="flex-shrink-0 w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-lg">2</div>
                        <p class="font-semibold">Funds go to Federal & Provincial Govt.</p>
                    </div>
                    <span class="text-3xl text-blue-500 hidden md:block transform rotate-90 md:rotate-0">→</span>
                    <div class="flex items-center space-x-3">
                        <div class="flex-shrink-0 w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-lg">3</div>
                        <p class="font-semibold">Resident gets sick (uses Health Card)</p>
                    </div>
                    <span class="text-3xl text-blue-500 hidden md:block transform rotate-90 md:rotate-0">→</span>
                    <div class="flex items-center space-x-3">
                        <div class="flex-shrink-0 w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-lg">4</div>
                        <p class="font-semibold">Doctor bills the Provincial Govt.</p>
                    </div>
                    <span class="text-3xl text-blue-500 hidden md:block transform rotate-90 md:rotate-0">→</span>
                    <div class="flex items-center space-x-3">
                        <div class="flex-shrink-0 w-10 h-10 bg-emerald-600 text-white rounded-full flex items-center justify-center font-bold text-lg">✓</div>
                        <p class="font-semibold">Resident pays $0 at point of care</p>
                    </div>
                </div>
            </div>

            <h3 class="text-2xl font-semibold text-gray-900 mt-12 mb-6">What's Covered vs. Not Covered?</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-emerald-50 border border-emerald-200 p-6 rounded-lg shadow-sm">
                    <h4 class="text-xl font-bold text-emerald-800 mb-4">✓ Covered by Medicare</h4>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-start"><span class="text-emerald-600 font-bold mr-2">✓</span><span>Medically necessary hospital services (stays, procedures)</span></li>
                        <li class="flex items-start"><span class="text-emerald-600 font-bold mr-2">✓</span><span>Medically necessary physician services (family doctor, specialist visits)</span></li>
                        <li class="flex items-start"><span class="text-emerald-600 font-bold mr-2">✓</span><span>Diagnostic tests (e.g., X-rays, blood tests)</span></li>
                    </ul>
                </div>
                <div class="bg-rose-50 border border-rose-200 p-6 rounded-lg shadow-sm">
                    <h4 class="text-xl font-bold text-rose-800 mb-4">✗ Not Covered by Medicare</h4>
                    <ul class="space-y-2 text-gray-700">
                        <li class="flex items-start"><span class="text-rose-600 font-bold mr-2">✗</span><span>Prescription drugs (outside of hospitals)</span></li>
                        <li class="flex items-start"><span class="text-rose-600 font-bold mr-2">✗</span><span>Dental care (e.g., cleanings, fillings)</span></li>
                        <li class="flex items-start"><span class="text-rose-600 font-bold mr-2">✗</span><span>Vision care (e.g., eyeglasses, eye exams)</span></li>
                        <li class="flex items-start"><span class="text-rose-600 font-bold mr-2">✗</span><span>Mental health services (outside of hospitals)</span></li>
                        <li class="flex items-start"><span class="text-rose-600 font-bold mr-2">✗</span><span>Long-term care (varies by province)</span></li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Comparison Section -->
        <section id="comparison" class="content-section hidden">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Canada vs. Malaysia: By the Numbers</h2>
            <p class="text-lg text-gray-700 mb-8 max-w-3xl">
                Comparing the two systems reveals significant differences in spending, outcomes, and equity. Canada spends a much larger portion of its GDP on health for superior outcomes, while Malaysia faces challenges with rising lifestyle diseases and higher out-of-pocket spending.
            </p>

            <div class="space-y-12">
                <!-- Health Indicators Chart -->
                <div>
                    <h3 class="text-2xl font-semibold text-gray-900 mb-6 text-center">Key Health Indicators</h3>
                    <div class="chart-container w-full max-w-2xl h-80 md:h-96">
                        <canvas id="healthIndicatorsChart"></canvas>
                    </div>
                </div>

                <!-- Financing Model Charts -->
                <div>
                    <h3 class="text-2xl font-semibold text-gray-900 mb-6 text-center">Financing Model</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                        <div>
                            <h4 class="text-lg font-semibold text-center mb-3">Canada: Funding Source</h4>
                            <div class="chart-container w-full max-w-md h-72 md:h-80">
                                <canvas id="canadaFinancingChart"></canvas>
                            </div>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-center mb-3">Malaysia: Funding Source</h4>
                            <div class="chart-container w-full max-w-md h-72 md:h-80">
                                <canvas id="malaysiaFinancingChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cost & Burden Chart -->
                <div>
                    <h3 class="text-2xl font-semibold text-gray-900 mb-6 text-center">Cost vs. Health Burden</h3>
                    <div class="chart-container w-full max-w-2xl h-80 md:h-96">
                        <canvas id="costBurdenChart"></canvas>
                    </div>
                </div>

                <!-- Equity Comparison Table -->
                <div>
                    <h3 class="text-2xl font-semibold text-gray-900 mb-6 text-center">Equity at a Glance</h3>
                    <div class="w-full max-w-4xl mx-auto bg-white shadow-md rounded-lg overflow-hidden border border-gray-200">
                        <table class="w-full text-left">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="p-4 font-semibold">Metric</th>
                                    <th class="p-4 font-semibold text-blue-700">Canada</th>
                                    <th class="p-4 font-semibold text-green-700">Malaysia</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr>
                                    <td class="p-4 font-semibold">Access</td>
                                    <td class="p-4">Universal access based on need, not income.</td>
                                    <td class="p-4">Heavily subsidized public care (crowded); growing private sector.</td>
                                </tr>
                                <tr>
                                    <td class="p-4 font-semibold">Out-of-Pocket (OOP)</td>
                                    <td class="p-4">Very low (~14%) for necessary care. High for gaps (dental, drugs).</td>
                                    <td class="p-4">Significantly higher (~38%), can be a barrier for B40 group.</td>
                                </tr>
                                <tr>
                                    <td class="p-4 font-semibold">Financial Hardship</td>
                                    <td class="p-4">Strong protection from financial hardship for necessary care.</td>
                                    <td class="p-4">Lower-income groups may delay care due to cost or distance.</td>
                                </tr>
                                <tr>
                                    <td class="p-4 font-semibold">Regional Gaps</td>
                                    <td class="p-4">Rural/remote areas face access issues and wait times.</td>
                                    <td class="p-4">Significant access gaps between urban and rural areas.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Challenges Section -->
        <section id="challenges" class="content-section hidden">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Canada's System Under Pressure</h2>
            <p class="text-lg text-gray-700 mb-8 max-w-3xl">
                Despite its strengths, the Canadian system faces significant challenges. These issues create debates about efficiency, cost, and the scope of public coverage.
            </p>
            <div class="space-y-4 max-w-3xl mx-auto">
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                    <button class="challenge-toggle w-full flex justify-between items-center p-5 font-semibold text-left text-lg" aria-expanded="false">
                        <span>Long Wait Times</span>
                        <span class="challenge-icon text-2xl text-blue-500 font-light">+</span>
                    </button>
                    <div class="challenge-content hidden p-5 border-t border-gray-100 text-gray-700">
                        A primary complaint is the long wait for non-urgent elective procedures (like hip replacements) and specialist care. This drives some Canadians to seek private care.
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                    <button class="challenge-toggle w-full flex justify-between items-center p-5 font-semibold text-left text-lg" aria-expanded="false">
                        <span>Gaps in Coverage</span>
                        <span class="challenge-icon text-2xl text-blue-500 font-light">+</span>
                    </button>
                    <div class="challenge-content hidden p-5 border-t border-gray-100 text-gray-700">
                        The exclusion of dental, vision, and prescription drugs from Medicare means many rely on private insurance or pay out-of-pocket, creating inequity.
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                    <button class="challenge-toggle w-full flex justify-between items-center p-5 font-semibold text-left text-lg" aria-expanded="false">
                        <span>Drug Coverage Variability</span>
                        <span class="challenge-icon text-2xl text-blue-500 font-light">+</span>
                    </button>
                    <div class="challenge-content hidden p-5 border-t border-gray-100 text-gray-700">
                        Since prescription drugs aren't part of the Act, each province/territory has its own drug plan (pharmacare), leading to different coverage levels across the country.
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                    <button class="challenge-toggle w-full flex justify-between items-center p-5 font-semibold text-left text-lg" aria-expanded="false">
                        <span>Rural & Remote Access</span>
                        <span class="challenge-icon text-2xl text-blue-500 font-light">+</span>
                    </button>
                    <div class="challenge-content hidden p-5 border-t border-gray-100 text-gray-700">
                        In a country as vast as Canada, ensuring equitable access for residents in rural, remote, and Indigenous communities is a constant and difficult challenge.
                    </div>
                </div>
            </div>
        </section>

        <!-- Lessons Section -->
        <section id="lessons" class="content-section hidden">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Key Takeaways for Malaysia</h2>
            <p class="text-lg text-gray-700 mb-8 max-w-3xl">
                Canada's experience, with both its successes and failures, offers valuable lessons for Malaysia as it continues to develop its own health system.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 h-full">
                    <h4 class="text-xl font-semibold text-blue-800 mb-3">Strengthen Primary Care</h4>
                    <p class="text-gray-700">Emphasize the role of primary health care (like family physicians) as gatekeepers to prevent overuse of specialist and hospital services.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 h-full">
                    <h4 class="text-xl font-semibold text-blue-800 mb-3">Clear National Standards</h4>
                    <p class="text-gray-700">A national act (like the CHA) ensures a consistent standard of care and access, regardless of state or income level.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 h-full">
                    <h4 class="text-xl font-semibold text-blue-800 mb-3">Data & Transparency</h4>
                    <p class="text-gray-700">Invest in efficient data management (like CIHI) for sharing, transparency, and monitoring KPIs to improve quality and efficiency.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 h-full">
                    <h4 class="text-xl font-semibold text-blue-800 mb-3">Consolidate Financing</h4>
                    <p class="text-gray-700">Move from fragmented financing to a more coordinated and transparent system to improve efficiency and reduce waste.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 h-full">
                    <h4 class="text-xl font-semibold text-blue-800 mb-3">Invest in People</h4>
                    <p class="text-gray-700">Adequate investment in human resources (doctors, nurses, technicians) is crucial to reduce backlogs and manage wait times.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 h-full">
                    <h4 class="text-xl font-semibold text-blue-800 mb-3">Standardize PPPs</h4>
                    <p class="text-gray-700">Strengthen Public-Private Partnerships (PPPs) with clear legislation and standard care requirements to leverage private delivery effectively.</p>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="text-center py-8 mt-12 border-t border-gray-200">
        <p class="text-gray-500 text-sm">Case Study by UPM Group 5: Hafriz Faliq bin Hasnor & Nor Adilah binti Abdul Rahman</p>
    </footer>

    <!-- QR Code Modal -->
    <div id="qrModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-[100] backdrop-blur-sm">
        <div class="bg-white p-8 rounded-xl shadow-2xl max-w-sm w-full text-center relative animate-fade-in">
            <button id="closeQrModal" class="absolute top-3 right-4 text-gray-400 hover:text-gray-800 text-2xl transition-colors">&times;</button>
            <h3 class="text-xl font-bold text-gray-900 mb-2">Scan to View</h3>
            <p class="text-sm text-gray-500 mb-6">Point your camera here to open this presentation on your device.</p>
            <div id="qrcode" class="flex justify-center mb-6 p-2 bg-white rounded"></div>
            <div class="text-xs text-gray-400 bg-gray-50 p-3 rounded border border-gray-100">
                Note: This QR code works best when this page is hosted online (e.g., Netlify, GitHub Pages).
            </div>
        </div>
    </div>

    <script>
        const CHART_JS_CDN = 'https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js';

        document.addEventListener('DOMContentLoaded', () => {
            initNav();
            initAccordion();
            initQR(); // Initialize QR functionality
            loadScript(CHART_JS_CDN, initCharts);
        });

        function loadScript(src, callback) {
            const script = document.createElement('script');
            script.src = src;
            script.onload = callback;
            document.body.appendChild(script);
        }

        function initNav() {
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');
            const activeClass = 'active-nav-link';

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('data-target');
                    
                    navLinks.forEach(l => l.classList.remove(activeClass));
                    link.classList.add(activeClass);
                    
                    contentSections.forEach(section => {
                        if (`#${section.id}` === targetId) {
                            section.classList.remove('hidden');
                        } else {
                            section.classList.add('hidden');
                        }
                    });
                    
                    window.scrollTo(0, 0);
                });
            });
        }

        function initAccordion() {
            const triggers = document.querySelectorAll('.challenge-toggle');
            triggers.forEach(trigger => {
                trigger.addEventListener('click', () => {
                    const content = trigger.nextElementSibling;
                    const icon = trigger.querySelector('.challenge-icon');
                    const isExpanded = trigger.getAttribute('aria-expanded') === 'true';

                    if (isExpanded) {
                        content.classList.add('hidden');
                        trigger.setAttribute('aria-expanded', 'false');
                        icon.textContent = '+';
                        icon.style.transform = 'rotate(0deg)';
                    } else {
                        content.classList.remove('hidden');
                        trigger.setAttribute('aria-expanded', 'true');
                        icon.textContent = '+';
                        icon.style.transform = 'rotate(45deg)';
                    }
                });
            });
        }

        function initQR() {
            const shareBtn = document.getElementById('shareBtn');
            const modal = document.getElementById('qrModal');
            const closeBtn = document.getElementById('closeQrModal');
            const qrContainer = document.getElementById('qrcode');
            let qrCodeObj = null;

            shareBtn.addEventListener('click', () => {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                
                // Clear previous QR code
                qrContainer.innerHTML = '';
                
                // Generate new QR Code for current URL
                if (typeof QRCode !== 'undefined') {
                    qrCodeObj = new QRCode(qrContainer, {
                        text: window.location.href,
                        width: 200,
                        height: 200,
                        colorDark : "#000000",
                        colorLight : "#ffffff",
                        correctLevel : QRCode.CorrectLevel.H
                    });
                } else {
                    qrContainer.innerHTML = 'QR Library loading... Try again in a second.';
                }
            });

            const closeModal = () => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            };

            closeBtn.addEventListener('click', closeModal);
            
            // Close on click outside
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });
        }

        function initCharts() {
            if (typeof Chart === 'undefined') {
                console.error('Chart.js failed to load.');
                return;
            }

            Chart.defaults.font.family = "'Inter', sans-serif";
            Chart.defaults.color = '#333';

            createHealthIndicatorsChart();
            createFinancingCharts();
            createCostBurdenChart();
        }

        function createHealthIndicatorsChart() {
            const ctx = document.getElementById('healthIndicatorsChart')?.getContext('2d');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Life Expectancy (Years)', 'Infant Mortality (per 1,000)'],
                    datasets: [
                        {
                            label: 'Canada',
                            data: [82, 4],
                            backgroundColor: 'rgba(59, 130, 246, 0.7)', // Blue
                            borderColor: 'rgba(59, 130, 246, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Malaysia',
                            data: [75, 7],
                            backgroundColor: 'rgba(16, 185, 129, 0.7)', // Emerald
                            borderColor: 'rgba(16, 185, 129, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y;
                                        if (context.label.includes('Years')) {
                                            label += ' years';
                                        } else {
                                            label += ' per 1,000';
                                        }
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Value'
                            }
                        }
                    }
                }
            });
        }

        function createFinancingCharts() {
            const canadaCtx = document.getElementById('canadaFinancingChart')?.getContext('2d');
            const malaysiaCtx = document.getElementById('malaysiaFinancingChart')?.getContext('2d');
            if (!canadaCtx || !malaysiaCtx) return;
            
            new Chart(canadaCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Public (70%)', 'Private / OOP (30%)'],
                    datasets: [{
                        data: [70, 30],
                        backgroundColor: ['rgba(59, 130, 246, 0.7)', 'rgba(203, 213, 225, 0.7)'],
                        borderColor: ['rgba(59, 130, 246, 1)', 'rgba(203, 213, 225, 1)'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        tooltip: {
                             callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.parsed}%`;
                                }
                            }
                        }
                    }
                }
            });

            new Chart(malaysiaCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Public (~62%)', 'Private / OOP (38%)'],
                    datasets: [{
                        data: [62, 38],
                        backgroundColor: ['rgba(16, 185, 129, 0.7)', 'rgba(203, 213, 225, 0.7)'],
                        borderColor: ['rgba(16, 185, 129, 1)', 'rgba(203, 213, 225, 1)'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                     plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        tooltip: {
                             callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.parsed}%`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function createCostBurdenChart() {
            const ctx = document.getElementById('costBurdenChart')?.getContext('2d');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Health Spending (% of GDP)', 'Diabetes Rate (%)'],
                    datasets: [
                        {
                            label: 'Canada',
                            data: [12.0, 8.5],
                            backgroundColor: 'rgba(59, 130, 246, 0.7)', // Blue
                            borderColor: 'rgba(59, 130, 246, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Malaysia',
                            data: [4.0, 17.5],
                            backgroundColor: 'rgba(16, 185, 129, 0.7)', // Emerald
                            borderColor: 'rgba(16, 185, 129, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y + '%';
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Percentage (%)'
                            }
                        }
                    }
                }
            });
        }

    </script>

</body>
</html>
